# Gerrit Configuration for AtonixCorp Platform

[gerrit]
    basePath = git
    canonicalWebUrl = http://localhost:8081
    serverId = atonixcorp-gerrit

[database]
    type = postgresql
    hostname = gerrit-db
    database = gerrit
    username = gerrit

[auth]
    type = DEVELOPMENT_BECOME_ANY_ACCOUNT
    # For production, use LDAP or OAuth
    # type = LDAP
    # gitBasicAuthPolicy = LDAP

[ldap]
    # Uncomment for LDAP authentication
    # server = ldap://ldap:389
    # username = cn=admin,dc=atonixcorp,dc=com
    # accountBase = ou=people,dc=atonixcorp,dc=com
    # accountPattern = (&(objectClass=person)(uid=${username}))
    # accountFullName = displayName
    # accountEmailAddress = mail
    # groupBase = ou=groups,dc=atonixcorp,dc=com

[sendemail]
    smtpServer = localhost
    smtpServerPort = 587
    smtpUser = gerrit@atonixcorp.com
    from = Gerrit Code Review <gerrit@atonixcorp.com>

[container]
    user = gerrit
    javaHome = /usr/lib/jvm/java-11-openjdk
    javaOptions = -Dlog4j2.formatMsgNoLookups=true
    javaOptions = -Djava.security.egd=file:/dev/./urandom

[sshd]
    listenAddress = *:29418
    advertisedAddress = localhost:29418

[httpd]
    listenUrl = http://*:8080/

[cache]
    directory = cache

[index]
    type = lucene

[change]
    submitWholeTopic = true

[submit]
    action = rebase if necessary

[project]
    defaultSubmitType = REBASE_IF_NECESSARY

[plugin "webhooks"]
    # Webhook configuration for CI integration
    url = http://jenkins:8080/gerrit-webhook/
    connectionTimeout = 5000
    socketTimeout = 5000
    maxTries = 3

[plugin "replication"]
    # Replication configuration
    defaultForceUpdate = true

[commentlink "changeid"]
    match = "(I[0-9a-f]{8,40})"
    link = "#/q/$1"

[commentlink "bugzilla"]
    match = "(bug\\s+#?)(\\d+)"
    link = "https://bugs.atonixcorp.com/show_bug.cgi?id=$2"

[commentlink "jira"]
    match = "([A-Z]+-\\d+)"
    link = "https://jira.atonixcorp.com/browse/$1"

[download]
    scheme = ssh
    scheme = http
    scheme = anon_http
    scheme = anon_git

[gerrit]
    reportBugUrl = https://github.com/atonixdev/atonixcorp-platform/issues